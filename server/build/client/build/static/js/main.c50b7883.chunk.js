"use strict";
(this.webpackJsonpclient = this.webpackJsonpclient || []).push([[0], { 232: function (e, t, n) {
            "use strict";
            n.r(t);
            var r = {};
            n.r(r), n.d(r, "fetchUser", (function () { return v; })), n.d(r, "handleToken", (function () { return y; })), n.d(r, "submitSurvey", (function () { return g; })), n.d(r, "fetchSurveys", (function () { return w; }));
            var c = n(1), a = (n(109), n(0)), s = n(46), i = n.n(s), u = n(9), l = n(7), o = n(103), j = n(19), d = n(8), b = n(20), h = n.n(b), f = n(37), x = n(26), O = n.n(x), m = "fetch_user", p = "fetch_surveys", v = function () { return function () { var e = Object(f.a)(h.a.mark((function e(t) { var n; return h.a.wrap((function (e) { for (;;)
                switch (e.prev = e.next) {
                    case 0: return e.next = 2, O.a.get("/api/current_user");
                    case 2: n = e.sent, t({ type: m, payload: n.data });
                    case 4:
                    case "end": return e.stop();
                } }), e); }))); return function (t) { return e.apply(this, arguments); }; }(); }, y = function (e) { return function () { var t = Object(f.a)(h.a.mark((function t(n) { var r; return h.a.wrap((function (t) { for (;;)
                switch (t.prev = t.next) {
                    case 0: return t.next = 2, O.a.post("/api/stripe", e);
                    case 2: r = t.sent, n({ type: m, payload: r.data });
                    case 4:
                    case "end": return t.stop();
                } }), t); }))); return function (e) { return t.apply(this, arguments); }; }(); }, g = function (e, t) { return function () { var n = Object(f.a)(h.a.mark((function n(r) { var c; return h.a.wrap((function (n) { for (;;)
                switch (n.prev = n.next) {
                    case 0: return n.next = 2, O.a.post("/api/surveys", e);
                    case 2: c = n.sent, t.push("/surveys"), r({ type: m, payload: c.data });
                    case 5:
                    case "end": return n.stop();
                } }), n); }))); return function (e) { return n.apply(this, arguments); }; }(); }, w = function () { return function () { var e = Object(f.a)(h.a.mark((function e(t) { var n; return h.a.wrap((function (e) { for (;;)
                switch (e.prev = e.next) {
                    case 0: return e.next = 2, O.a.get("/api/surveys");
                    case 2: n = e.sent, t({ type: p, payload: n.data });
                    case 4:
                    case "end": return e.stop();
                } }), e); }))); return function (t) { return e.apply(this, arguments); }; }(); }, N = n(104), S = n.n(N), k = Object(u.b)(null, r)((function (e) { return Object(c.jsx)(S.a, { name: "EmailMaster", description: "$5 for 5 email credits", amount: 500, token: function (t) { return e.handleToken(t); }, stripeKey: "pk_test_51HjPGuCB0aAkLp2aGowUjyRBZtNMaWVOtAbRBJuaayGSIDapjqztXNOd4F2yXFangfDSvMJwGTVpQxo5dA1IDvSc00fggnfWBz", children: Object(c.jsx)("button", { className: "btn", children: "Add Credits" }) }); })), C = Object(u.b)((function (e) { return { auth: e.auth }; }))((function (e) { return Object(c.jsx)("nav", { children: Object(c.jsxs)("div", { className: "nav-wrapper", children: [Object(c.jsx)(j.b, { to: e.auth ? "/surveys" : "/", className: "left brand-logo", style: { marginLeft: 10 }, children: "EmailMaster" }), Object(c.jsx)("ul", { className: "right", children: function () { switch (e.auth) {
                                case null: return;
                                case !1: return Object(c.jsx)("li", { children: Object(c.jsx)("a", { href: "/auth/google", children: "Login With Google" }) });
                                default: return Object(c.jsxs)(c.Fragment, { children: [Object(c.jsx)("li", { children: Object(c.jsx)(k, {}) }), Object(c.jsxs)("li", { style: { margin: "0 10px" }, children: ["Credits: ", e.auth.credits] }), Object(c.jsx)("li", { children: Object(c.jsx)("a", { href: "/api/logout", children: "LogOut" }) })] });
                            } }() })] }) }); })), A = function () { return Object(c.jsxs)("div", { style: { textAlign: "center" }, children: [Object(c.jsx)("h1", { children: "EmailMaster" }), "Collect feedback from your users"] }); }, B = Object(u.b)((function (e) { return { surveys: e.surveys }; }), { fetchSurveys: w })((function (e) { Object(a.useEffect)((function () { e.fetchSurveys(); }), []); return Object(c.jsx)("div", { children: e.surveys.reverse().map((function (e) { return Object(c.jsxs)("div", { className: "card blue-grey darken-1", children: [Object(c.jsxs)("div", { className: "card-content white-text", children: [Object(c.jsx)("span", { className: "card-title", children: e.title }), Object(c.jsx)("p", { children: e.body }), Object(c.jsxs)("p", { className: "right", children: ["Sent on: ", new Date(e.dateSent).toLocaleDateString()] })] }), Object(c.jsxs)("div", { className: "card-action", children: [Object(c.jsxs)("a", { children: ["Yes: ", e.yes] }), Object(c.jsxs)("a", { children: ["No: ", e.no] })] })] }, e._id); })) }); })), E = function () { return Object(c.jsxs)("div", { children: [Object(c.jsx)(B, {}), Object(c.jsx)("div", { className: "fixed-action-btn", children: Object(c.jsx)(j.b, { to: "/surveys/new", className: "btn-floating btn-large red", children: Object(c.jsx)("i", { className: "material-icons", children: "add" }) }) })] }); }, L = n(106), _ = n(233), F = n(234), z = n(70), D = function (e) { var t = e.input, n = e.label, r = e.meta, a = r.error, s = r.touched; return Object(c.jsxs)("div", { children: [Object(c.jsx)("label", { children: n }), Object(c.jsx)("input", Object(z.a)(Object(z.a)({}, t), {}, { style: { marginBottom: "5px" } })), Object(c.jsx)("div", { className: "red-text", style: { marginBottom: "20px" }, children: s && a })] }); }, G = /^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/, M = [{ label: "Survey Title", name: "title" }, { label: "Subject Line", name: "subject" }, { label: "Email Body", name: "body" }, { label: "Recipient List", name: "recipients" }], T = Object(_.a)({ validate: function (e) { var t = {}; return t.recipients = function (e) { var t = e.split(",").map((function (e) { return e.trim(); })).filter((function (e) { return !1 === G.test(e); })); if (t.length)
                    return "These emails are invalid: ".concat(t); }(e.recipients || ""), M.forEach((function (n) { e[n.name] || (t[n.name] = "You must provide a value"); })), t; }, form: "surveyForm", destroyOnUnmount: !1 })((function (e) { return Object(c.jsx)("div", { children: Object(c.jsxs)("form", { onSubmit: e.handleSubmit((function () { return e.onSurveySubmit(); })), children: [M.map((function (e) { var t = e.label, n = e.name; return Object(c.jsx)(F.a, { component: D, type: "text", label: t, name: n }, n); })), Object(c.jsx)(j.b, { to: "/surveys", className: "red btn-flat white-text", children: "Cancel" }), Object(c.jsxs)("button", { type: "submit", className: "teal btn-flat right white-text", children: ["Next", Object(c.jsx)("i", { className: "material-icons right", children: "done" })] })] }) }); })), J = Object(u.b)((function (e) { return { formValues: e.form.surveyForm.values }; }), r)(Object(d.e)((function (e) { var t = e.onCancel, n = e.formValues, r = e.submitSurvey, a = e.history, s = M.map((function (e) { var t = e.name, r = e.label; return Object(c.jsxs)("div", { children: [Object(c.jsx)("label", { children: r }), Object(c.jsx)("div", { children: n[t] })] }, t); })); return Object(c.jsxs)("div", { children: [Object(c.jsx)("h5", { children: "Please review your entries" }), s, Object(c.jsx)("button", { className: "yellow white-text darken-3 btn-flat", onClick: t, children: "Back" }), Object(c.jsxs)("button", { className: "green white-text btn-flat right", onClick: function () { return r(n, a); }, children: ["Send Survey", Object(c.jsx)("i", { className: "material-icons right", children: "email" })] })] }); }))), U = Object(_.a)({ form: "surveyForm" })((function () { var e = Object(a.useState)(!1), t = Object(L.a)(e, 2), n = t[0], r = t[1]; return Object(c.jsx)("div", { children: n ? Object(c.jsx)(J, { onCancel: function () { return r(!1); } }) : Object(c.jsx)(T, { onSurveySubmit: function () { return r(!0); } }) }); })), V = Object(u.b)(null, r)((function (e) { return Object(a.useEffect)((function () { e.fetchUser(); }), []), Object(c.jsx)("div", { className: "container", children: Object(c.jsx)(j.a, { children: Object(c.jsxs)("div", { children: [Object(c.jsx)(C, {}), Object(c.jsx)(d.a, { exact: !0, path: "/", component: A }), Object(c.jsx)(d.a, { exact: !0, path: "/surveys", component: E }), Object(c.jsx)(d.a, { path: "/surveys/new", component: U })] }) }) }); })), Z = n(235), R = Object(l.c)({ auth: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) {
                    case m: return t.payload || !1;
                    default: return e;
                } }, form: Z.a, surveys: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) {
                    case p: return t.payload;
                    default: return e;
                } } });
            window.axios = O.a;
            var W = Object(l.d)(R, {}, Object(l.a)(o.a));
            i.a.render(Object(c.jsx)(u.a, { store: W, children: Object(c.jsx)(V, {}) }), document.querySelector("#root"));
        } }, [[232, 1, 2]]]);
//# sourceMappingURL=main.c50b7883.chunk.js.map
